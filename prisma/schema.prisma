generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("postgresql://neondb_owner:npg_IzyfikErt18B@ep-wispy-dew-aiusopyc-pooler.c-4.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require")
}

model Client {
  id             Int       @id @default(autoincrement())
  name           String
  birthDate      DateTime?
  rg             String?   @unique
  cpf            String?   @unique
  address        String?
  phone          String?
  email          String?
  maritalStatus  String?
  nationality    String?   @default("Brasileira")
  profession     String?
  notes          String?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt

  updates        CaseUpdate[]
}

model CaseUpdate {
  id          Int      @id @default(autoincrement())
  clientId    Int
  date        DateTime @default(now())
  description String
  status      String?
  client      Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
}

model Usuario {
  id             String   @id @default(cuid())
  nome           String
  dataNascimento DateTime
  rg             String
  cpf            String   @unique
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt   // ✅ novo campo para registrar atualizações
}